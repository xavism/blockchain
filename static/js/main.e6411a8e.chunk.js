(this["webpackJsonpui-react"]=this["webpackJsonpui-react"]||[]).push([[0],{145:function(e,t,n){},156:function(e,t){},158:function(e,t){},168:function(e,t){},1690:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(46),s=n.n(r),l=(n(145),n(9)),i="CHANGE_DIFFICULTY",o="CHANGE_REWARD",u="UPDATE_BLOCK",d="ADD_TRANSACTION",F="MINE",b=function(e,t){return{type:u,payload:{index:e,block:t}}},j=n(47),h=n(10),m=n(0),f=function(e){var t=e.index,n=e.block,c=n.hash,a=n.nonce,r=n.previousHash,s=n.timestamp,i=Object(l.b)(),o=function(e,c){var a=c.target.value,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i(b(t,Object(h.a)(Object(h.a)({},n),{},Object(j.a)({},e,r?parseFloat(a):a))))};return Object(m.jsx)("div",{className:"rounded bg-gray-100 shadow px-2 py-4",children:Object(m.jsxs)("div",{className:"",children:[Object(m.jsxs)("div",{className:"flex mb-2",children:[Object(m.jsx)("label",{className:"mr-2 font-bold",htmlFor:"hash",children:"Hash"}),Object(m.jsx)("input",{className:"flex-1 pl-2 border border-blue-500 rounded-xl",value:c,onChange:function(e){return o("hash",e)},type:"text"})]}),Object(m.jsxs)("div",{className:"flex mb-2",children:[Object(m.jsx)("label",{className:"mr-2 font-bold",htmlFor:"nonce",children:"Nonce"}),Object(m.jsx)("input",{className:"flex-1 pl-2",value:a,onChange:function(e){return o("nonce",e,!0)},type:"number",min:"0"})]}),Object(m.jsxs)("div",{className:"flex mb-2",children:[Object(m.jsx)("label",{className:"mr-2 font-bold",htmlFor:"previousHash",children:"Previous hash"}),Object(m.jsx)("input",{className:"flex-1 pl-2",value:r,onChange:function(e){return o("previousHash",e)},type:"text"})]}),Object(m.jsxs)("div",{className:"flex",children:[Object(m.jsx)("label",{className:"mr-2 font-bold",htmlFor:"hash",children:"Timestamp"}),Object(m.jsx)("input",{className:"flex-1 pl-2",value:s,onChange:function(e){return o("timestamp",e)},type:"text"})]})]})})},x=n(24),O=function(e){var t=e.wallet;return Object(m.jsx)("div",{className:"cursor-pointer",children:Object(m.jsx)("span",{style:{backgroundColor:t.color,color:t.textColor},className:"py-1 px-2 rounded-xl",children:t.name})})},p=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.blockchain})).pendingTransactions,n=Object(l.c)((function(e){return e.wallets})).wallets,a=Object(c.useState)(!1),r=Object(x.a)(a,2),s=r[0],i=r[1],o=Object(c.useState)(""),u=Object(x.a)(o,2),d=u[0],b=u[1],j=function(e){return n.find((function(t){return t.publicKey===e}))},h=function(e){e.stopPropagation()},f=function(t){e(function(e){return{type:F,payload:e}}(d)),h(t)},p=function(e){var t=e.target.value;return b(t)};return Object(m.jsxs)("div",{className:"rounded bg-gray-100 shadow",children:[t.length?Object(m.jsxs)("div",{className:" px-2 py-2 flex items-center cursor-pointer hover:bg-gray-200 justify-between rounded-t",onClick:function(){return i(!s)},children:[Object(m.jsx)("h2",{className:"font-bold flex-1",children:"Pending Transactions: "}),Object(m.jsx)("div",{children:Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{className:"mr-2",htmlFor:"miner",children:"Miner:"}),Object(m.jsxs)("select",{value:d,onChange:p,onClick:h,name:"miner",id:"miner",children:[Object(m.jsx)("option",{value:"",children:"Select an addr"}),n.map((function(e){var t=e.publicKey,n=e.name;return Object(m.jsx)("option",{value:t,children:n},t)}))]}),Object(m.jsx)("button",{disabled:""===d,onClick:f,className:"py-1 px-2 mx-2 rounded text-white bg-gray-500 hover:bg-gray-600",children:"Mine \u26cf\ufe0f"})]})}),Object(m.jsx)("span",{className:"ml-5 flex justify-center items-center w-5 h-5 rounded-full text-white bg-red-500",children:t.length})]}):Object(m.jsx)("h2",{className:"font-bold px-2 py-2",children:"No Pending Transactions"}),function(){if(s)return Object(m.jsx)("div",{className:"px-2 py-2",children:t.map((function(e){var t=j(e.fromAddress.publicKey),n=j(e.toAddress.publicKey);return Object(m.jsxs)("div",{className:"flex items-center my-1",children:[Object(m.jsx)(O,{wallet:t}),Object(m.jsxs)("div",{className:"mx-2",children:["sends ",e.amount," to "]}),Object(m.jsx)(O,{wallet:n})]},e.id)}))})}()]})},E=function(){var e=Object(l.c)((function(e){return e.blockchain})),t=e.difficulty,n=e.miningReward,a=e.chain,r=Object(l.b)(),s=new Worker("./workers/mine.worker.js");Object(c.useEffect)((function(){s.postMessage({name:"hi"}),console.log("Message posted to worker")}),[]),s.onmessage=function(e){console.log("Message received from worker",e.data)};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{className:"font-bold text-2xl mb-4",children:"Blockchain"}),Object(m.jsxs)("div",{className:"flex justify-between mb-4",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{className:"mr-4",htmlFor:"difficulty",children:"Difficulty: "}),Object(m.jsx)("input",{className:"border border-grey-100 pl-2",value:t,type:"number",onChange:function(e){var t=e.target.value;r(function(e){return{type:i,payload:e}}(parseInt(t)))},min:"1"})]}),Object(m.jsxs)("div",{children:[Object(m.jsx)("label",{className:"mr-4",htmlFor:"difficulty",children:"Mining Reward: "}),Object(m.jsx)("input",{className:"border border-grey-100 pl-2",value:n,type:"number",onChange:function(e){var t,n=e.target.value;r((t=parseFloat(n),{type:o,payload:t}))},min:"1"})]})]}),Object(m.jsx)("div",{className:"mb-4",children:Object(m.jsx)(p,{})}),Object(m.jsx)("div",{children:a.map((function(e,t){return Object(m.jsx)(f,{className:"mb-4",block:e,index:t},e.hash)}))})]})},C="ADD_WALLET",v=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.wallets})).wallets;return Object(m.jsxs)("div",{className:"mb-4",children:[Object(m.jsx)("h2",{className:"font-bold text-xl mb-4",children:"Wallets"}),Object(m.jsxs)("div",{className:"p-4 rounded bg-gray-100 w-full",children:[Object(m.jsx)("div",{className:"flex flex-wrap mb-4",children:t.length?t.map((function(e){return function(e){return Object(m.jsx)("div",{className:"mb-2 mx-1 cursor-pointer",children:Object(m.jsx)("span",{style:{backgroundColor:e.color,color:e.textColor},className:"py-1 px-2 rounded-xl",children:e.name})},e.publicKey)}(e)})):Object(m.jsx)("p",{className:"py-2",children:"There are no wallets yet"})}),Object(m.jsx)("button",{onClick:function(){e({type:C})},className:"w-full py-1 px-4 rounded bg-gray-500 text-white focus:outline-none hover:bg-gray-600",children:"Create"})]})]})},g=n(15),A=n(16),y=n(49),B=n(22),D=new B.ec("secp256k1"),N=function(){function e(){Object(g.a)(this,e)}return Object(A.a)(e,null,[{key:"createTx",value:function(e,t,n){return{id:Math.random().toString(36).substr(2,9),fromAddress:e,toAddress:t,amount:n,signature:""}}},{key:"calculateHash",value:function(e,t,n){return Object(y.SHA256)(e+t+n).toString()}},{key:"signTx",value:function(e,t){if(t.publicKey!==e.fromAddress.publicKey)throw new Error("You cannot sign transactions for other wallets");var n=this.calculateHash(e.fromAddress.publicKey,e.toAddress.publicKey,e.amount),c=t.sign(n);e.signature=c.toDER("hex")}},{key:"isValid",value:function(e){if(null===e.fromAddress)return!0;if(!e.signature||0===e.signature.length)throw new Error("No signature in this transaction");var t=D.keyFromPublic(e.fromAddress.publicKey,"hex"),n=this.calculateHash(e.fromAddress.publicKey,e.toAddress.publicKey,e.amount);return t.verify(n,e.signature)}}]),e}(),w=function(){var e=Object(l.b)(),t=Object(c.useState)(""),n=Object(x.a)(t,2),a=n[0],r=n[1],s=Object(c.useState)(""),i=Object(x.a)(s,2),o=i[0],u=i[1],F=Object(c.useState)(0),b=Object(x.a)(F,2),j=b[0],h=b[1],f=Object(l.c)((function(e){return e.wallets})).wallets,O=function(e,t){e(t.target.value)},p=function(){return f.map((function(e){var t=e.publicKey,n=e.name;return Object(m.jsx)("option",{value:t,children:n},t)}))};return Object(m.jsxs)("div",{className:"mb-4",children:[Object(m.jsx)("h2",{className:"font-bold text-xl mb-4",children:"Transactions"}),Object(m.jsxs)("div",{className:"p-4 rounded bg-gray-100 w-full",children:[Object(m.jsxs)("div",{className:"flex mb-2",children:[Object(m.jsx)("label",{className:"font-bold mr-2",htmlFor:"from",children:"From Address: "}),Object(m.jsxs)("select",{className:"flex-1",name:"from",id:"from",value:a,onChange:function(e){return O(r,e)},children:[Object(m.jsx)("option",{children:"Select an addr"}),p()]})]}),Object(m.jsxs)("div",{className:"flex mb-2",children:[Object(m.jsx)("label",{className:"font-bold mr-2",htmlFor:"to",children:"To Address: "}),Object(m.jsxs)("select",{className:"flex-1",name:"to",id:"to",value:o,onChange:function(e){return O(u,e)},children:[Object(m.jsx)("option",{children:"Select an addr"}),p()]})]}),Object(m.jsxs)("div",{className:"flex mb-2",children:[Object(m.jsx)("label",{className:"font-bold mr-2",htmlFor:"from",children:"Amount: "}),Object(m.jsx)("input",{className:"flex-1",value:j,onChange:function(e){return O(h,e)},type:"number",step:"10",min:"0"})]}),Object(m.jsx)("button",{disabled:!j||""===a||""===o,onClick:function(){var t=f.find((function(e){return e.publicKey===a})),n=f.find((function(e){return e.publicKey===o})),c=N.createTx(t,n,j);N.signTx(c,t),e(function(e){return{type:d,payload:e}}(c))},className:"w-full py-1 px-4 rounded bg-gray-500 text-white focus:outline-none hover:bg-gray-600 disabled:bg-gray-200",children:"Create"})]})]})};var k=function(){return Object(m.jsx)("div",{className:"container pt-10 mx-auto px-4",children:Object(m.jsxs)("div",{className:"grid md:grid-cols-3 xl:grid-cols-4 gap-4",children:[Object(m.jsx)("section",{className:"md:col-span-2 xl:col-span-3",children:Object(m.jsx)(E,{})}),Object(m.jsxs)("div",{children:[Object(m.jsx)("section",{children:Object(m.jsx)(v,{})}),Object(m.jsx)("section",{children:Object(m.jsx)(w,{})})]})]})})},T=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,1691)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))},K=n(23),S=n(138),H=n(25),M=function(){function e(){Object(g.a)(this,e)}return Object(A.a)(e,null,[{key:"createBlock",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return{timestamp:e,transactions:t,previousHash:n,nonce:0,hash:this.calculateHash(e,t,n,0)}}},{key:"mineBlock",value:function(e,t){for(var n=e.timestamp,c=e.transactions,a=e.previousHash;e.hash.substring(0,t)!==Array(t).fill(0).join("");)e.nonce++,e.hash=this.calculateHash(n,c,a,e.nonce)}},{key:"createGenesisBlock",value:function(){return this.createBlock((new Date).toLocaleDateString(),[],"0")}},{key:"calculateHash",value:function(e,t,n,c){return Object(y.SHA256)(e+JSON.stringify(t)+n+c).toString()}},{key:"hasValidTransactions",value:function(e){return e.every((function(e){return e.isValid()}))}}]),e}(),P=function(){function e(){Object(g.a)(this,e)}return Object(A.a)(e,null,[{key:"mine",value:function(e,t,n,c,a){var r=N.createTx(null,a,n);t.push(r);var s=M.createBlock(new Date,t,this.getLatestBlock(e).hash);return M.mineBlock(s,c),e.push(s),e}},{key:"getLatestBlock",value:function(e){return e[e.length-1]}}]),e}(),R={chain:[M.createGenesisBlock()],difficulty:2,pendingTransactions:[],miningReward:100},L=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:R,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i:return Object(h.a)(Object(h.a)({},e),{},{difficulty:t.payload});case o:return Object(h.a)(Object(h.a)({},e),{},{miningReward:t.payload});case u:var n=Object(H.a)(e.chain);return n.splice(t.payload.index,1,t.payload.block),Object(h.a)(Object(h.a)({},e),{},{chain:n});case d:var c=t.payload;if(!c.fromAddress.publicKey||!c.toAddress.privateKey)throw new Error("Transaction must include from and to address");if(!N.isValid(c))throw new Error("Cannot add invalid transaction to chain");return Object(h.a)(Object(h.a)({},e),{},{pendingTransactions:[].concat(Object(H.a)(e.pendingTransactions),[c])});case F:return Object(h.a)(Object(h.a)({},e),{},{pendingTransactions:[],chain:P.mine(Object(H.a)(e.chain),Object(H.a)(e.pendingTransactions),e.miningReward,e.difficulty,t.payload)});default:return e}},I=n(139),W=n.n(I),_=["#F44336","#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#E53935","#D32F2F","#C62828","#B71C1C","#FF8A80","#FF5252","#FF1744","#D50000","#FCE4EC","#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457","#880E4F","#FF80AB","#FF4081","#F50057","#C51162","#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A","#4A148C","#EA80FC","#E040FB","#D500F9","#AA00FF","#EDE7F6","#D1C4E9","#B39DDB","#9575CD","#7E57C2","#673AB7","#5E35B1","#512DA8","#4527A0","#311B92","#B388FF","#7C4DFF","#651FFF","#6200EA","#E8EAF6","#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593","#1A237E","#8C9EFF","#536DFE","#3D5AFE","#304FFE","#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0","#0D47A1","#82B1FF","#448AFF","#2979FF","#2962FF","#E1F5FE","#B3E5FC","#81D4FA","#4FC3F7","#29B6F6","#03A9F4","#039BE5","#0288D1","#0277BD","#01579B","#80D8FF","#40C4FF","#00B0FF","#0091EA","#E0F7FA","#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F","#006064","#84FFFF","#18FFFF","#00E5FF","#00B8D4","#E0F2F1","#B2DFDB","#80CBC4","#4DB6AC","#26A69A","#009688","#00897B","#00796B","#00695C","#004D40","#A7FFEB","#64FFDA","#1DE9B6","#00BFA5","#E8F5E9","#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32","#1B5E20","#B9F6CA","#69F0AE","#00E676","#00C853","#F1F8E9","#DCEDC8","#C5E1A5","#AED581","#9CCC65","#8BC34A","#7CB342","#689F38","#558B2F","#33691E","#CCFF90","#B2FF59","#76FF03","#64DD17","#F9FBE7","#F0F4C3","#E6EE9C","#DCE775","#D4E157","#CDDC39","#C0CA33","#AFB42B","#9E9D24","#827717","#F4FF81","#EEFF41","#C6FF00","#AEEA00","#FFFDE7","#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825","#F57F17","#FFFF8D","#FFFF00","#FFEA00","#FFD600","#FFF8E1","#FFECB3","#FFE082","#FFD54F","#FFCA28","#FFC107","#FFB300","#FFA000","#FF8F00","#FF6F00","#FFE57F","#FFD740","#FFC400","#FFAB00","#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00","#E65100","#FFD180","#FFAB40","#FF9100","#FF6D00","#FBE9E7","#FFCCBC","#FFAB91","#FF8A65","#FF7043","#FF5722","#F4511E","#E64A19","#D84315","#BF360C","#FF9E80","#FF6E40","#FF3D00","#DD2C00","#EFEBE9","#D7CCC8","#BCAAA4","#A1887F","#8D6E63","#795548","#6D4C41","#5D4037","#4E342E","#3E2723","#FAFAFA","#F5F5F5","#EEEEEE","#E0E0E0","#BDBDBD","#9E9E9E","#757575","#616161","#424242","#212121","#ECEFF1","#CFD8DC","#B0BEC5","#90A4AE","#78909C","#607D8B","#546E7A","#455A64","#37474F","#263238","#000000"],G=function(){function e(){Object(g.a)(this,e)}return Object(A.a)(e,null,[{key:"isBright",value:function(e){var t=e.substring(1),n=parseInt(t,16);return!(.2126*(n>>16&255)+.7152*(n>>8&255)+.0722*(n>>0&255)<80)}},{key:"getRandomHexadecimalColor",value:function(){return"#".concat(Math.floor(16777215*Math.random()).toString(16))}},{key:"getColorFromColorPalette",value:function(){return _[Math.floor(1e5*Math.random())%_.length]}}]),e}(),V=new B.ec("secp256k1"),J=function(){function e(){Object(g.a)(this,e)}return Object(A.a)(e,null,[{key:"createRandomWallet",value:function(){var e=V.genKeyPair(),t=G.getColorFromColorPalette(),n=e.getPublic("hex"),c=e.getPrivate("hex");return{name:W.a.name.firstName(),color:t,textColor:G.isBright(t)?"black":"white",publicKey:n,privateKey:c,sign:function(t){return e.sign(t,"base64")}}}}]),e}(),U={wallets:[]},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:var n=J.createRandomWallet();return Object(h.a)(Object(h.a)({},e),{},{wallets:[].concat(Object(H.a)(e.wallets),[n])});default:return e}},q=n(140),z=Object(K.combineReducers)({blockchain:L,wallets:Y}),Q=Object(K.createStore)(z,Object(S.composeWithDevTools)(Object(K.applyMiddleware)(q.a)));s.a.render(Object(m.jsx)(a.a.StrictMode,{children:Object(m.jsx)(l.a,{store:Q,children:Object(m.jsx)(k,{})})}),document.getElementById("root")),T()},170:function(e,t){},197:function(e,t){},198:function(e,t){},203:function(e,t){},205:function(e,t){},212:function(e,t){},231:function(e,t){}},[[1690,1,2]]]);
//# sourceMappingURL=main.e6411a8e.chunk.js.map